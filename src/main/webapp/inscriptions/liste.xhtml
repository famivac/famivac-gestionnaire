<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head></h:head>

    <h:body>

        <ui:composition template="/WEB-INF/template/layout.xhtml">

            <ui:define name="metadata">
                <f:metadata>
                    <f:viewAction action="#{inscriptionsListeBean.init()}"></f:viewAction>
                </f:metadata>
            </ui:define>

            <ui:define name="title">Inscriptions</ui:define>

            <ui:define name="content">

                <div class="container">
                    <div class="col-md-3">
                        <div class="panel panel-default">
                            <div class="panel-heading">Rechercher</div>
                            <div class="panel-body">
                                <h:form id="form" role="form">
                                    <p:focus context="form"/>
                                    <div class="form-group">
                                        <label for="form_nom_famille">Nom famille</label>
                                        <p:inputText styleClass="form-control" id="form_nom_famille" placeholder="Nom famille"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="form_prenom_famille">Prénom famille</label>
                                        <p:inputText styleClass="form-control" id="form_prenom_famille" placeholder="Prénom famille"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="form_nom_enfant">Nom enfant</label>
                                        <p:inputText styleClass="form-control" id="form_nom_enfant" placeholder="Nom enfant"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="form_prenom_enfant">Prénom enfant</label>
                                        <p:inputText styleClass="form-control" id="form_prenom_enfant" placeholder="Prénom enfant"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="form_en_attente_validation">En attente validation</label>
                                        <p:selectBooleanCheckbox id="form_en_attente_validation" styleClass="form-control" value="true" />
                                    </div>
                                    <p:button 
                                        styleClass="btn-primary" 
                                        value="Rechercher"
                                        icon="ui-icon-search"/>
                                </h:form>  
                            </div>
                        </div>
                    </div>

                    <p:outputPanel id="resultats">
                        <div class="col-md-9">
                            <div class="panel panel-default">
                                <div class="panel-heading">Inscriptions enfants</div>
                                <div class="panel-body">
                                    <ui:repeat value="#{inscriptionsListeBean.beans}" var="inscription" varStatus="varStatus">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <p class="help-block">Famille</p>
                                                <h:outputText value="#{inscription.famille.prenom}"/> <h:outputText value="#{inscription.famille.nom}"/>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="help-block">Enfants</p>
                                                <ui:repeat value="#{inscription.enfants}" var="enfant" varStatus="varStatus">
                                                    <h:outputText value="#{enfant.prenom}"/> <h:outputText value="#{enfant.nom}"/>
                                                    <br />
                                                </ui:repeat>
                                            </div>
                                            <div class="col-md-3">
                                                <p class="help-block">Séjour</p>
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <h:form rendered="#{inscription.enAttenteValidation}">
                                                <div class="col-md-10">
                                                    <p:commandButton
                                                        styleClass="btn-success pull-right"
                                                        ajax="false"
                                                        icon="ui-icon-check"
                                                        value="Accepter">
                                                    </p:commandButton>
                                                    <p:commandButton
                                                        styleClass="btn-danger pull-right"
                                                        ajax="false"
                                                        icon="ui-icon-closethick"
                                                        value="Refuser">
                                                    </p:commandButton>
                                                </div>
                                                <div class="col-md-2">
                                                    <p:button 
                                                        outcome="details.xhtml"
                                                        styleClass="btn-default pull-right" 
                                                        icon="ui-icon-pencil"
                                                        value="Consulter">
                                                        <f:param name="id" value="#{inscription.id}"></f:param>
                                                    </p:button>
                                                </div>
                                            </h:form>
                                        </div> <!-- row -->
                                        <hr />
                                    </ui:repeat>
                                </div>
                            </div>
                        </div>
                    </p:outputPanel>

                </div> <!-- .container -->

            </ui:define>
        </ui:composition>
    </h:body>
</html>

